<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homework</title>
  <style>
    canvas { border: 1px solid #000; }
  </style>
</head>
<body>
  <canvas id="_Canvas" width="800" height="800"></canvas>
</body>
</html>

<script>
/*
class Dog{
    Height=100;
}
    let dogs = [];

let c = new Dog();
Dog.Height=100;
console.log(c);

let d = new  Dog();
Dog.Height=200;
console.log(d);





let d = new  Dog();
dogs[0] = d; 
d.Height = 1000;
let dd2 = d ;
console.log( d ) ;
console.log( dogs[0] ) ;
console.log( dd2 ) ;



for (let j=0;j<100;j++){
    let d = new  Dog();
    dogs[j] = d; 
    d.Height=j;
}

console.log (dogs);


//kkkkkkkkkkkkkkkkkkkkkkkkk

class Cat{
coler=0
}
let cats = [];

for (let i=0;i<3;i++){
    let c = new Cat();
    cats[i] = c; 
    c.coler=i;
}

console.log (cats);   


class Deer{
    isMale=true;
}
let deers=[];

for (let k=0;k<2;k++){
    let d =new Deer;
   
    if (k=0){
    d.isMale=true
    deers[true] = d;
    }else{
    d.isMale=false;
    deers[false] = d;
    }
}
console.log (deers);  

class Cat{
    isMale=true;
}
let cats = [];


    cats [0]  = new  Cat();
    cats [0].isMale=true;
 

    if(cats [0].isMale==true){
        console.log ( `I am male` );
    }
        
    console.log ( cats );
//    console.log ( c.isMale );
*/
/*
class Table {
    x = 10;
    y = 20;
    move( x, y ) {
        this.x = x ;
        this.y = y ;
    }
}
let table = new Table() ;
console.log( table.x ) ;
table.move( 30, 50 ) ;
console.log( table.x ) ;
*/
/*
class Abc{
    abc = [];

    random(){
        for (let i=0;i<40;i++){
            this.abc [i] = Math.floor (Math.random()*20);
        }
        console.log(this.abc);
    }

    sort(){
        for (let j=0;j<40;j++){
            let again = false ;
            for (let i=0;i<39;i++){
                if (this.abc [i]>this.abc [i+1]) {
                    this.bubble = this.abc [i];
                    this.abc [i] =this.abc [i+1];
                    this.abc [i+1]=this.bubble ;
                    again = true;
                }
            }
            if ( !again ) {
                break ;
            }
        }
        console.log( this.abc );
    }
}
let k = new Abc();
k.random();
k.sort();
*/
/*
class Table{
    x = 8;
    y = 8;
    move(x,y){
    this.x = x;
    this.y = y;
    }

}
table = new Table;
console.log(table.x);
table.move(64,64);
console.log(table.x);
*/
/*
class Frog{
    row = 0 ;
    col = 0 ;
    move () {
        this.col+=2;
        console.log(this.col);3
    }
}
let i = new Frog();
for (let j=0;j<8;j++){
    i.move();
}
*/
const canvas = document.getElementById('_Canvas');
const ctx = canvas.getContext('2d');

class Tank{

    static CELL_SIZE = 14 ;
    h = 0 ;
    row = Math.floor(Math.random()*39) ;  
    col = Math.floor(Math.random()*39) ; 
//    red = Math.floor(Math.random()*256) ;
//    green = Math.floor(Math.random()*256) ;
//    blue = Math.floor(Math.random()*256) ;
    red = Math.floor(Math.random()*56)+200 ;
    green = Math.floor(Math.random()*56)+200 ;
    blue = Math.floor(Math.random()*56)+200 ;
    static drawBackground(){
        ctx.strokeStyle = "orange";
        for (let i=0;i<40+1;i++){
            ctx.moveTo(Tank.CELL_SIZE*i,0 );
            ctx.lineTo(Tank.CELL_SIZE*i,Tank.CELL_SIZE*40);
        } 
        for (let j=0;j<40+1;j++){
            ctx.moveTo(0,Tank.CELL_SIZE*j );
            ctx.lineTo(Tank.CELL_SIZE*40,Tank.CELL_SIZE*j);    
        }
        ctx.stroke();
    }
    drawCell(){
        ctx.fillStyle = `rgb(${this.red},${this.green},${this.blue})` ;
        ctx.fillRect( this.col*Tank.CELL_SIZE+1, this.row*Tank.CELL_SIZE+1, Tank.CELL_SIZE-2, Tank.CELL_SIZE-2 ) ;
    }
    cleanCell(){
        ctx.fillStyle = `rgb(255,255,255)` ;
        ctx.fillRect( this.col*Tank.CELL_SIZE+1, this.row*Tank.CELL_SIZE+1, Tank.CELL_SIZE-2, Tank.CELL_SIZE-2 ) ;
    }

    move(){
        this.cleanCell() ;
        let i = Math.floor(Math.random()*2) ;
        this.h = Math.floor(Math.random()*2) ;
        if (this.h==0){
            this.h=-1;
        }else{
            this.h=1 ;
        }
        if (i==0){
            this.row+=this.h ;
        }else{
            this.col+=this.h ;
        }
        if (this.row<0){
            this.row = 0  ;
        }
        if (this.row>39){
            this.row = 39 ;
        }
        if (this.col<0){
            this.col = 0 ;
        }
        if (this.col>39){
            this.col = 39 ;
        }
        this.drawCell() ;
        for (let i=0;i<tanks.length;i++){
            if ( tanks[i].row==myTank.row&&tanks[i].col==myTank.col ){
                tanks.splice(i,1) ;
                if (tanks.length==0){
                    console.log("ture:0") ; 
                }else{
                    console.log(`false:${tanks.length}`) ;
                }
                return ;
        }
    }
        // for (let i=0;i<tanks.length;i++){
        //     if ( tanks[i] !=this&&tanks[i].row==this.row&&tanks[i].col==this.col ){
        //         tanks.splice(i,1) ;
        //         return ;
        //     }
        // }
    }
}

class MyTank {
    row = 0 ;
    col = 0 ;
    red = Math.floor(Math.random()*256) ;
    green = Math.floor(Math.random()*256) ;
    blue = Math.floor(Math.random()*256) ;
    constructor() {
        document.addEventListener( "keydown", this.keyDown.bind(this) ) ;
    }
    keyDown(event ) {
         this.cleanMyCell() ;
        if (event.code==`ArrowUp`){
            this.row-=1 ;
            if (this.row<0){
                this.row = 0  ;
            }
        }
        if (event.code==`ArrowDown`){
            this.row+=1 ;
            if (this.row>39){
                this.row = 39 ;
            }
        }
        if (event.code==`ArrowRight`){
            this.col+=1 ;
            if (this.col>39){
                this.col = 39 ;
            }
        }
        if (event.code==`ArrowLeft`){
            this.col-=1 ;
            if (this.col<0){
                this.col = 0 ;
            }
        }
        this.drawMyCell() ;
        for (let i=0;i<tanks.length;i++){
        if ( tanks[i].row==this.row&&tanks[i].col==this.col ){
            tanks.splice(i,1) ;
            if (tanks.length==0){
                console.log('ture 0') ;
            }else{
                console.log(`false${tanks.length}`) ;
            }
            return ;
        }
    }
    }

    drawMyCell(){
        ctx.fillStyle = `rgb(${this.red},${this.green},${this.blue})` ;
        ctx.fillRect( this.col*Tank.CELL_SIZE+1, this.row*Tank.CELL_SIZE+1, Tank.CELL_SIZE-2, Tank.CELL_SIZE-2 ) ;
    }
    cleanMyCell(){
        ctx.fillStyle = `rgb(255,255,255)` ;
        ctx.fillRect( this.col*Tank.CELL_SIZE+1, this.row*Tank.CELL_SIZE+1, Tank.CELL_SIZE-2, Tank.CELL_SIZE-2 ) ;
    }
    

}

let tanks = [] ; 
for (let i=0;i<100;i++){
    tanks [tanks.length] = new Tank () ;
}
Tank.drawBackground () ;
let countDown = 3000 ;
let myTank = new MyTank() ;
run() ;
function run() {
    for (let i=0;i<tanks.length;i++){
        tanks [i].move() ;
    }
    myTank.cleanMyCell () ;
    myTank.drawMyCell () ;
    if ( --countDown > 0 ) {
        setTimeout( run, 800 ) ;
    }
}

    
</script>